\chapter{Preliminaries}\label{Preliminaries}
\section{Integration on manifolds}\label{Integration}

Let $M$ be an $n$-dimensional manifold and let $\omega$ be an $n$-form on $M$ with compact support. The integration of $\omega$ over $M$ can be defined in the following way.

Let $\{ U_j\}$ be a locally finite cover of $M$ and let $\{\rho_j\}$ be the partition of unity subordinating to the cover. That is
\begin{enumerate}
\item $\rho_j\geq 0$;
\item ${\rm supp}\,\rho_i\subset U_j$ for all $j$;
\item $\sum _j\rho_j=1$.
\end{enumerate}



Then we can define
\[
\int_M\omega=\sum_j\int_{U_j}\rho_j\omega,
\]
where the right hand side is a sum of integrations on Euclidean space, hence well defined.


\begin{ex} Prove that  the definition of integral is independent to the choices of cover and the partition of unity.
\end{ex}

The definition of integration can be generalized to manifold with boundary. A manifold with boundary  is a topological space such that
\begin{enumerate}
\item It  can be covered by  $\{U_j\}$, where $U_j$ is either the unit ball of $\mathbb R^n$, or the upper half of the unit ball of $\mathbb R^n$ defined by
\[
\{(x_1,\cdots,x_n)\mid\sum x_i^2<1,x_n\geq 0\}.
\]
\item The transition functions are smooth (up to the boundary).
\end{enumerate}

Let $M$ be a manifold with boundary. Let $\pa M$ be the boundary of $M$. Then we have
\begin{enumerate}
\item $\pa M$ is a smooth manifold;
\item $\pa M$ is a manifold without boundary. That is $\pa\pa M=0$, or $\pa^2=0$.
\end{enumerate}

The theorem of partition of unity can be generalized into the following setting.

\begin{theorem}
Let $\{U_j\}_I$ be a locally finite cover of $M$. Then there exists a partition of unity subordinating to the cover $\{\rho_j\}$. Moreover, let 
\[
J=\{j\in I\mid U_j\cap \pa M=\emptyset\}.
\]
Then
\[
\{U_j\cap\pa M\}_{j\in J},\qquad \rho_j|_{\pa M\cap U_j}
\]
is a partition of unity subordinating to the corresponding cover.
\end{theorem}

\begin{ex} Prove the above theorem.\end{ex}

 A manifold is called orientable, if there is a cover $\{U_j\}$ on $M$ such that if $x_j^1,\cdots,x_j^n$ are the coordinates on $U_j$, then we have
\[
\det\frac{\pa (x_j^1,\cdots,x_j^n)}{\pa(x_i^1,\cdots,x_i^n)}>0
\]
for any $U_i\cap U_j\neq\emptyset$. Such a set of coordinate charts is called an orientation of the manifold.


\begin{ex} If $M$ is an orientable manifold with boundary, prove that $\pa M$ is also an orientable manifold.\end{ex}

\begin{theorem}[Stokes' Theorem] Let $M$ be an orientable manifold with the given orientation. Then there is a natural orientation on $\pa M$ such that 
\[
\int_M d\omega=\int_{\pa M}\omega
\]
 for any $(n-1)$ forms on $M$.
\end{theorem}

\begin{proof}  Let $\{U_i\}$ be a locally finite cover and let $\{\phi_i\}$ be the partition of unity subordinating to the cover. Since
\[
d\sum_j\rho_j=0,
\]
we have
\begin{align*}
&
\int_M d\omega=\sum_{j\in I}\int_{U_j}\rho_jd\omega=\sum_{j\in I}\int_{U_j}d(\rho_j\omega), \qquad and\\&
\int_{\pa M}\omega=\sum_{j\in J}\int_{\pa M\cap U_j}\rho_j\omega.
\end{align*}

The Stokes' theorem follows from the following statements:
\begin{enumerate}
\item 
\[
\int_{U_j}d(\rho_j\omega)=0,\qquad j\not\in J;
\]

\item 
\[
\int_{U_j}d(\rho_j\omega)=\int_{U_j\cap\{x_n=0\}}\rho_j\omega,\qquad j\in J.
\]
\end{enumerate}

In the first case, we may assume that $U_j$ is the unit ball of $\mathbb R^n$, and ${\rm supp}\,(\rho_j\omega)\subset U_j$. Write
\[
\rho_j\omega=\sum_i (-1)^i f_i dx_1\wedge\cdots \hat{dx_i}\wedge\cdots\wedge dx_n,
\]
where $\hat{\quad}$ means omit the term.
Then
\[
\int_{U_j} d(\rho_j\omega)=\sum_{i=1}^n\frac{\pa f_i}{\pa x_i} dx_1\wedge\cdots\wedge dx_n.
\]
Since $f_j$ vanishes on the boundary of $\pa U_j$, we have
\[
\int_{U_j}d(\rho_j\omega)=0
\]
by the fundamental theorem of Calculus.

The proof of the second assertion is similar. We assume that
\[
U_j=\{(x_1,\cdots,x_n)\mid\sum x_j^2<1, x_n\geq 0\}.
\]
Then we have

\[
d(\rho_j\omega)=\sum_{i=1}^n \frac{\pa f_i}{\pa x_i}dx_1\wedge\cdots\wedge dx_n.
\]
If $i\neq n$, then
\[
\int_{U_j}\frac{\pa f_i}{\pa x_i}dx_1\wedge\cdots\wedge dx_n=0.
\]
With the appropriate orientation, we have

\[
\int_{U_j}\frac{\pa f_n}{\pa x_n}dx_1\wedge\cdots\wedge dx_n=\int_{U_j\cap \{x_n=0\}} f_n dx_1\wedge\cdots\wedge d x_{n-1}.
\]
The theorem follows from the above two equations. 
\end{proof}

\begin{ex} Provided the details in the last part of the proof of Stokes' Theorem.
\end{ex}


\begin{lemma} On an orientable Riemannian manifold, the $n$-form
\[
\sqrt{\det(g_{ij})}\, dx_1\wedge\cdots\wedge dx_n
\]
is globally defined.
\end{lemma}

\begin{definition} Let $f$ be a smooth function with compact support in a Riemannian manifold. Then
\[
\int_M fdV_M=\int_M f\sqrt{\det(g_{ij})} \,dx_1\wedge\cdots\wedge dx_n.
\]
\end{definition}

\begin{ex} Let
\[
X=\sum a^i\frac{\pa}{\pa x_i}
\]
be a vector field of $M$.
The divergence of the vector field $X$ is defined to be
\[
{\rm div}\, X=\sum_i\frac{\pa a^i}{\pa x^i}+\frac 12 a^i\frac{\pa}{\pa x_i}\log\det(g_{k\ell}).
\]
Prove that
\[
\int_M{\rm div}\, X dV_M=0.
\]
\end{ex}

\section{The extension of the Levi-Civita connection}\label{LC_connection}

Let $M$ be a Riemannian manifold and let $\nabla$ be the Levi-Civita connection. We extend $\nabla$ to all tensor fields as follows.

\begin{definition} Let $X,Y$ be vector fields.
\begin{enumerate}
\item If $f\in \mathcal C^\infty(M)$, then $\nabla_X f=Xf$;
\item  $\nabla _XY$ is defined by the Levi-Civita connection;
\item If $\omega$ is a one-form, we use
\[
(\nabla_X\omega)Y=X(\omega(Y))-\omega(\nabla_XY)
\]
 to define the one form $\nabla_X\omega$;
 \item In general, let $\{e_1,\cdots,e_n\}$ be a local frame of $M$ and let $\omega_1,\cdots,\omega_n$ be the dual frame.  Let
  \[
 T=a_{i_1\cdots i_p j_1\cdots j_q}e_{i_1}\otimes\cdots \otimes e_{i_p}\otimes\omega_{j_1}\otimes\cdots\otimes \omega_{j_q}.
 \]
We define
 \begin{align*}
 &\nabla_X T=X(a_{i_1\cdots i_pj_1\cdots j_q})e_{i_1}\otimes\cdots\otimes \omega_{j_q}\\
 &+\sum_{s=1}^p a_{i_1\cdots i_pj_1\cdots j_q}e_{i_1}\otimes\cdots\otimes \nabla_X e_{i_s}\otimes \cdots\otimes \omega_{j_q}\\\
 &+\sum_{t=1}^q a_{i_1\cdots i_pj_1\cdots j_q}e_{i_1}\otimes\cdots\otimes \nabla_X \omega_{j_t}\otimes \cdots\otimes \omega_{j_q}.
 \end{align*}
 \end{enumerate}
 \end{definition}


Using the above notations, we have
\begin{theorem} $\nabla_X ds^2=0$, where $ds^2$ is the Riemannian metric.
\end{theorem}

\begin{proof}[Proof 1.]
Let $(x_1,\cdots,x_n)$ be a local coordinate system, and let $\Gamma_{ij}^k$ be the Christoffel symbols. 
We then have
\[
\nabla_{\frac{\pa}{\pa x_k}}\frac{\pa}{\pa x_i}=\Gamma_{ki}^\ell\frac{\pa}{\pa x_\ell}
\]
and 
\[
\nabla_{\frac{\pa}{\pa x_k}}dx_j=-\Gamma_{k\ell}^jdx_\ell
\]
Thus we have
\[
\nabla_{\frac{\pa}{\pa x_k}} g_{ij}dx_idx_j
=\frac{\pa g_{ij}}{\pa x_k}dx_idx_j-g_{ij}\Gamma_{k\ell}^i dx_\ell dx_j-g_{ij}\Gamma_{k\ell}^j dx_i dx_\ell=0.
\]

\end{proof} 

\begin{proof}[Proof 2.]Using the intrinsic 
characterization of the Riemannian metric
\[
(\nabla_X ds^2)(Y,Z)=X(\langle Y,Z\rangle)-\langle\nabla_X Y,Z\rangle-\langle Y,\nabla_X Z\rangle=0.
\]

\end{proof}

We also have the following  result which well justifies our definition of the curvature operator.

\begin{theorem}
Let $d_{\nabla^2}$ be the operator defined by the composition
\[
TM\overset{\nabla}{\longrightarrow}TM\otimes T^*M\overset{\nabla}{\longrightarrow}TM\otimes T^*M\otimes T^*M\overset{\wedge}{\longrightarrow}TM\otimes\Lambda^2(M).
\]
Then it is the curvature operator.
\end{theorem}

\begin{proof}
We have
\[
\nabla\frac{\pa}{\pa x_i}=\Gamma_{ki}^j\frac{\pa}{\pa x_j}\otimes dx_k,
\]
and 
\begin{align*}
&
\qquad \nabla^2\frac{\pa}{\pa x_i}=\frac{\pa \Gamma_{ki}^j}{\pa x_\ell}\cdot\frac{\pa}{\pa x_j}\otimes dx_k\otimes dx_\ell\\
&+\Gamma_{ki}^j\Gamma_{\ell j}^m\frac{\pa}{\pa x_m}\otimes dx_k\otimes dx_\ell
-\Gamma_{ki}^j\Gamma_{\ell m}^k\frac{\pa}{\pa x_j}
\otimes dx_m\otimes dx_\ell.
\end{align*}

Thus we have
\begin{align*}
&
\qquad d_{\nabla^2}\frac{\pa}{\pa x_i}=\frac{\pa \Gamma_{ki}^j}{\pa x_\ell}\cdot\frac{\pa}{\pa x_j}\otimes dx_k\wedge  dx_\ell\\
&+\Gamma_{ki}^j\Gamma_{\ell j}^m\frac{\pa}{\pa x_m}\otimes dx_k\wedge dx_\ell
-\Gamma_{ki}^j\Gamma_{\ell m}^k\frac{\pa}{\pa x_j}
\otimes dx_m\wedge dx_\ell.
\end{align*}
Obviously, the last term of the above equation is zero. Thus after changing indices, we have

\[
d_{\nabla^2}\frac{\pa}{\pa x_i}=\left(\frac{\pa \Gamma_{ki}^j}{\pa x_\ell}-\Gamma_{ki}^m\,\Gamma_{\ell m}^j\right) \cdot\frac{\pa}{\pa x_j}\otimes dx_k\wedge  dx_\ell.
\]
By a straightforward computation, we get
\[
d_{\nabla^2}\frac{\pa}{\pa x_i}=-\frac 12 R_{imk\ell}g^{mj}\,\frac{\pa}{\pa x_k}\otimes dx_k\wedge dx_\ell,
\]
where 
\[
R_{ijk\ell}=-g_{js}\left(\frac{\pa \Gamma_{ki}^s}{\pa x_\ell}-\frac{\pa \Gamma_{\ell i}^s}{\pa x_k}-\Gamma_{ki}^m\,\Gamma_{\ell m}^s+\Gamma_{\ell i}^m\,\Gamma_{k m}^s
\right).
\]
\end{proof}




As showed above, it is quite tedious to use local coordinates to compute the curvature. The natural frame
\[
\left(\frac{\pa}{\pa x_1},\cdots,\frac{\pa}{\pa x_n}\right)
\]
may not be our best choice. For the rest of the lecture notes, in the most cases, we use orthonormal frames.

Let $e_1,\cdots,e_n$ be local orthonormal frame and let $\omega_1,\cdots,\omega_n$ be the dual frame. Then the Riemannian metric can be written as
\[
ds^2=\omega_1\otimes\omega_1+\cdots+\omega_n\otimes\omega_n=\omega_1^2+\cdots+\omega_n^2,
\]
where the tensor product is understood as the symmetric tensor product.

We write
\[
\nabla_X e_j=\omega_{ij}(X) e_i,
\]
where $X$ is a vector field,
and 
\[
R_{ijk\ell}=\langle \nabla_{e_k}\nabla_{e_\ell} e_j-\nabla_{e_\ell}\nabla_{e_k} e_j
-\nabla_{[e_k,e_\ell]}e_j,e_i\rangle.
\]

The Cartan's formulas are
\[
\left\{
\begin{array}{l}
d\omega_j+\omega_i\wedge\omega_{ij}=0,\\
d\omega_{ij}+\omega_{is}\wedge\omega_{sj}=\frac 12 R_{ijk\ell}\,\omega_k\wedge\omega_\ell.
\end{array}
\right.
\]

\begin{ex} Prove that $\omega_{ij}=-\omega_{ji}$.\end{ex}

\begin{ex} Verify the above formulas.
\end{ex}


\begin{ex} Prove that given $\omega_j$, there are unique $\omega_{ij}$ with $\omega_{ij}=-\omega_{ji}$ satisfying the first Cartan equation.
\end{ex}


\begin{ex} Prove that at any point $p$, one can choose an orthonormal frame such that at $p$, the connection matrix $\omega_{ij}$ is zero.
\end{ex}

\begin{ex} Prove that, if the curvature is zero on a neighborhood, then on that neighborhood, one can choose an orthonormal  frame such that the connection matrix is identically zero on that neighborhood.
\end{ex}

In the following we give two examples of computing the curvature using the Cartan's formula. 

\begin{example}
On $\R^n$, we give the Riemannian metric to be
\[
ds^2=\frac{dx_1^2+\cdots +dx_n^2}{(1+\frac K4\sum x_k^2)^2}.
\]
Let
\[
A=1+\frac K4\sum x_k^2.
\]
and let $A_j=\frac{\pa A}{\pa x_j}$. We take 
\[
\omega_i=\frac{dx_i}{A}.
\]
Let
\[
\omega_{ij}=\frac{1}{A}(A_i\,dx_j-A_j\,dx_i).
\]
Then we have
\[
d\omega_j+\omega_i\wedge\omega_{ij}=0.
\]
Moreover, we have
\[
d\omega_{ij}+\omega_{is}\wedge\omega_{sj}=K\,\omega_i\wedge\omega_j.
\]
Thus the curvature tensor is
\[
R_{ijk\ell}=K\,(\delta_{ik}\delta_{j\ell}-\delta_{i\ell}\delta_{jk}),
\]
and the sectional curvature is $K$.
\end{example}

\begin{example}
Define
\[
S^n=\{(x_1,\cdots,x_{n+1})\mid \sum x_k^2=1\}
\]
and the Riemannian metric to be the inherited metric 
\[
ds^2=dx_1^2+\cdots +dx_n^2+\frac{x_ix_j}{x^2_{n+1}}\, dx_i\,dx_j.
\]
Define
\[
\omega_i=dx_i-\frac{x_i}{1+x_{n+1}}\,dx_{n+1}.
\]
Then
\[
\omega_{ij}=\frac{1}{1+x_{n+1}}(x_i\,dx_j-x_j\,dx_i).
\]
Thus we have
\[
d\omega_j+\omega_i\wedge\omega_{ij}=0,
\]
and
\[
d\omega_{ij}+\omega_{is}\wedge\omega_{sj}=\omega_i\wedge\omega_j.
\]
Thus the sectional curvature is $1$.
\end{example}


\section{Covariant derivatives}\label{Cov_derivatives}
The notation of connection on tensors field can be applied to co-tensors and yield the following

\begin{lemma} Let
\[
\eta=a_{i_1\cdots i_p}\omega_{i_1}\otimes\cdots\otimes\omega_{i_p}.
\]
Then
\[
\nabla_{e_k}\eta=\left(e_k(a_{i_1\cdots i_p})-\sum_s a_{i_1\cdots \underset{\underset{sth}{\uparrow}}r\cdots\cdots i_p}\omega_{r\, i_s}(e_k)\right)
\omega_{i_1}\otimes\cdots\otimes\omega_{i_p}.
\]
\end{lemma}

\begin{proof} A straightforward computation. \end{proof}





Because of the above result, we make the following definition:

\begin{definition}
We define 
\[
a_{i_1\cdots i_p,k}=e_k(a_{i_1\cdots,i_p})-\sum_s a_{i_1\cdots \underset{\underset{sth}{\uparrow}}r\cdots i_p}\omega_{r\, i_s}(e_k)
\]
and call it the covariant derivative of the coeficients $a_{i_1\cdots i_p}$.
\end{definition}


By the above definition, we have
\[
\nabla \eta=a_{i_1\cdots i_p,k}\,\omega_{k}\wedge \omega_{i_1}\otimes\cdots\otimes\omega_{i_p}.
\]


We have the following

\begin{theorem}\label{thm5} We have
\[
a_{i_1\cdots i_p,k,\ell}-a_{i_1\cdots i_p,\ell,k}
=
a_{i_1\cdots \underset{\underset{sth}{\uparrow}}r\cdots i_p} R_{r i_s k\ell}.
\]
\end{theorem}

\begin{proof} To prove the above result, we introduce some notations. We let $I=(i_1,\cdots,i_p)$ and 
let $\omega_I=\omega_{i_1}\otimes\cdots\otimes\omega_{i_p}$.
 Then we have
\begin{align*}
&\frac 12(a_{I,k,\ell}-a_{I,\ell,k})\,\omega_k\wedge\omega_\ell\otimes \omega_I\\
&=a_{I,k,\ell}\,\omega_k\wedge\omega_\ell\otimes\omega_I\\
&=d_{\nabla^2}\eta.
\end{align*}


Using the above notations, we can re-write the definition of covariant derivatives as following
\[
\nabla\eta=d a_I-a_{I_r}\,\omega_{r i_s},
\]
where 
\[
I_r=(i_1\cdots  \underset{\underset{sth}{\uparrow}}r\cdots i_p).
\]

We compute 
\begin{align}\label{p-1}
\begin{split}
&\qquad\qquad d_{\nabla^2}\eta=d_\nabla\left((\nabla\eta)_{I,k}\omega_k\otimes\omega_I\right)\\
&=-\left(d(\nabla\eta)_{I,k}-(\nabla\eta)_{I_r,k}\omega_{r i_s}-(\nabla\eta)_{I,r}\omega_{rk}\right)\wedge
\omega_k\otimes\omega_I.
\end{split}
\end{align}

The first and the third term of the above can be consolidated because
\[
d(\nabla\eta)_{I,k}\wedge\omega_k-(\nabla\eta)_{I,r}\omega_{rk}\wedge\omega_k
=d((\nabla\eta)_{I,k}\omega_k)
\]
by the first Cartan's formula.  
Thus we have
\[
d(\nabla\eta)_{I,k}\wedge\omega_k-(\nabla\eta)_{I,r}\omega_{rk}\wedge\omega_k
=d(d a_{I_r}-a_{I_r}\omega_{ri_s})=-da_{I_r}\wedge\omega_{r i_s}-a_{I_r}d\omega_{r i_s}.
\]
Combining the above equation with ~\eqref{p-1}, we have
\begin{align*}
&
d_{\nabla^2}\eta=-(-da_{I_r}\wedge\omega_{r i_s}-a_{I_r}d\omega_{r i_s})\otimes \omega_I
-(\nabla\eta)_{I_r,k}\omega_k\wedge\omega_{r i_s}\otimes\omega_I\\
&=a_{I_r}(d\omega_{r i_s}+\omega_{r\ell}\wedge\omega_{\ell i_s})\otimes\omega_I+\sum_{s\neq t}a_{i_1\cdots  \underset{\underset{tth}{\uparrow}}\mu\cdots
 \underset{\underset{sth}{\uparrow}}r\cdots i_p}\omega_{\mu i_t}\wedge
 \omega_{r i_s}\otimes\omega_I.
\end{align*}


For fixed $s\neq t$, we have
\[
a_{i_1\cdots  \underset{\underset{tth}{\uparrow}}\mu\cdots
 \underset{\underset{sth}{\uparrow}}r\cdots i_p}\omega_{\mu i_t}\wedge
 \omega_{r i_s}\otimes\omega_I+a_{i_1\cdots  \underset{\underset{tth}{\uparrow}}\mu\cdots
 \underset{\underset{sth}{\uparrow}}r\cdots i_p}\omega_{\mu i_s}\wedge
 \omega_{r i_t}\otimes\omega_I=0.
 \]
 Thus we have
 \[
 d_{\nabla^2}\eta=\frac 12 a_{I_r}R_{r i_sk\ell}\,\omega_k\wedge\omega_\ell\otimes\omega_I,
 \]
 and the lemma is proved.
 
\end{proof}
 
 Let $f$ be a smooth function. The following notations are often used
 \begin{align*}
 & f_i=e_i(f);\\
 & f_{ij}=f_{i,j};\\
 &f_{ijk}=f_{i,j,k}.
 \end{align*}
 
 We have 
 
 \begin{corollary}[Ricci identity] Using the above notations, we have
 \begin{align*}
 & f_{ij}=f_{ji};\\
 & f_{ijk}-f_{ikj}=f_r R_{rijk}.
 \end{align*}
 In particular, we have the following useful Ricci identity:
 \[
 \sum_i f_{iji}-\sum_i f_{iij}=(Ric)_{rj}f_r.
 \]
 \end{corollary}
 
\begin{proof} We only need to prove $f_{ij}=f_{ji}$. To see this, we compute
 \[
 f_{ij}\,\omega_j\wedge\omega_i
 =(df_i-f_r\omega_{ri})\wedge \omega_i=df_i\wedge\omega_i-f_r\,\omega_{ri}\wedge\omega_i.
 \]
 By the Cartan's formula, the right hand side of the above is equal to
 \[
 d(f_i\omega_i)=ddf=0.
 \]
 
\end{proof}